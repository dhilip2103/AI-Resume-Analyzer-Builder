{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Resume Editor</title>
    <link rel="stylesheet" href="{% static 'resume_builder/css/styles.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .editor-panel {
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        #resumeContent {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            min-height: 500px;
            padding: 2rem;
            background: white;
            transition: all 0.3s ease;
        }

        .control-group {
            border-right: 1px solid #eee;
            padding-right: 1.5rem;
        }

        .control-group:last-child {
            border-right: none;
        }

        .preview-card {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .font-option {
            font-family: var(--font-family) !important;
        }

        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            border: 2px solid #dee2e6;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0"><i class="fas fa-pencil-alt me-2"></i>Resume Customizer</h2>
            <div>
                <button class="btn btn-outline-secondary me-2" id="resetBtn">
                    <i class="fas fa-undo me-2"></i>Reset
                </button>
                <a href="{% url 'preview' %}" class="btn btn-primary">
                    <i class="fas fa-eye me-2"></i>Preview
                </a>
            </div>
        </div>

        <div class="editor-panel">
            <div class="row g-4">
                <!-- Font Controls -->
                <div class="col-md-4 control-group">
                    <label class="form-label fw-bold">Text Settings</label>
                    <div class="mb-3">
                        <label class="form-label">Font Size <span id="fontSizeValue" class="badge bg-primary">16px</span></label>
                        <input type="range" id="fontSizeSlider" class="form-range" min="12" max="24" value="16">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Font Family</label>
                        <select id="fontStyleSelect" class="form-select">
                            <option value="Arial">Arial</option>
                            <option value="Times New Roman">Times New Roman</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Courier New">Courier New</option>
                        </select>
                    </div>
                </div>

                <!-- Color Controls -->
                <div class="col-md-4 control-group">
                    <label class="form-label fw-bold">Color Settings</label>
                    <div class="mb-3">
                        <label class="form-label">Text Color</label>
                        <div class="d-flex align-items-center gap-3">
                            <input type="color" id="fontColorPicker" class="form-control form-control-color">
                            <div id="colorPreview" class="color-preview"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Highlight Color</label>
                        <input type="color" id="highlightColorPicker" class="form-control form-control-color">
                    </div>
                </div>

                <!-- Layout Controls -->
                <div class="col-md-4">
                    <label class="form-label fw-bold">Layout Settings</label>
                    <div class="mb-3">
                        <label class="form-label">Line Height</label>
                        <select id="lineHeightSelect" class="form-select">
                            <option value="1.2">Compact</option>
                            <option value="1.5">Normal</option>
                            <option value="2.0">Spacious</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Margin Size</label>
                        <input type="range" id="marginSlider" class="form-range" min="10" max="30" value="20">
                    </div>
                </div>
            </div>
        </div>

        <div id="resumeContent" class="preview-card">
            {% include template_path %}
        </div>
    </div>

    <script>
        // Real-time Controls
        const updateResumeStyles = () => {
            const resumeContent = document.getElementById('resumeContent');
            resumeContent.style.fontSize = `${fontSizeSlider.value}px`;
            resumeContent.style.fontFamily = fontStyleSelect.value;
            resumeContent.style.color = fontColorPicker.value;
            resumeContent.style.lineHeight = lineHeightSelect.value;
            resumeContent.style.margin = `${marginSlider.value}px auto`;
            colorPreview.style.backgroundColor = fontColorPicker.value;
        };

        // Font Size Control
        const fontSizeSlider = document.getElementById('fontSizeSlider');
        const fontSizeValue = document.getElementById('fontSizeValue');
        fontSizeSlider.addEventListener('input', () => {
            fontSizeValue.textContent = `${fontSizeSlider.value}px`;
            updateResumeStyles();
        });

        // Font Family Control
        const fontStyleSelect = document.getElementById('fontStyleSelect');
        fontStyleSelect.addEventListener('change', updateResumeStyles);

        // Color Picker
        const fontColorPicker = document.getElementById('fontColorPicker');
        const colorPreview = document.getElementById('colorPreview');
        fontColorPicker.addEventListener('input', updateResumeStyles);

        // Line Height Control
        const lineHeightSelect = document.getElementById('lineHeightSelect');
        lineHeightSelect.addEventListener('change', updateResumeStyles);

        // Margin Control
        const marginSlider = document.getElementById('marginSlider');
        marginSlider.addEventListener('input', updateResumeStyles);

        // Reset Button
        document.getElementById('resetBtn').addEventListener('click', () => {
            fontSizeSlider.value = 16;
            fontStyleSelect.value = 'Arial';
            fontColorPicker.value = '#000000';
            lineHeightSelect.value = '1.5';
            marginSlider.value = 20;
            updateResumeStyles();
        });

        // Initialize preview
        updateResumeStyles();

        // Keyboard Shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'z') {
                // Add undo functionality
                e.preventDefault();
            }
        });
    </script>
</body>
</html>